 阶段 B：干净重装 WSL

  方案一（推荐，Windows 11/10 22H2 及以上）

  1. 重新启用所需功能

  - Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux -NoRestart
  - Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform -NoRestart
  - Restart-Computer

  2. 安装 WSL（Store 版核心）

  - 安装核心不附带发行版：wsl --install --no-distribution
  - 更新到最新（可选）：wsl --update
  - 设为默认 WSL2：wsl --set-default-version 2

  3. 安装并初始化发行版

  - 查看可用发行版：wsl --list --online
  - 选择安装（如 Ubuntu）：wsl --install -d Ubuntu
  - 首次启动按提示创建用户名与密码

  方案二（Windows 10 较老版本或离线环境）

  1. 启用功能并重启

  - Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux -NoRestart
  - Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform -NoRestart
  - Restart-Computer

  2. 安装 WSL2 内核更新（需联网）

  - 访问官方链接并安装“WSL2 Linux 内核更新包”（图形界面）
  - 设置 WSL2 为默认：wsl --set-default-version 2
  - 从 Microsoft Store 安装所需发行版（或手动导入发行版包）

  验证

  - 查看版本与状态：wsl --version、wsl --status
  - 列出发行版：wsl -l -v
  - 进入发行版测试网络：wsl -d Ubuntu -e sh -c "uname -a && cat /etc/os-release"

  可选：恢复备份的发行版

  - 导入到新名称：wsl --import <NewName> "<安装目录,如 C:\WSL\<NewName>>" "$env:USERPROFILE\Desktop\<OldName>.tar"
    --version 2
  - 设为默认发行版：wsl -s <NewName>

  常见注意

  - 若 WSL2 无法启动，确认 BIOS 已开启 CPU 虚拟化（Intel VT-x/AMD-V），任务管理器“性能”页应显示“虚拟化: 已启用”。
  - 若你需要使用 Docker Desktop，可在重装 WSL 后再安装 Docker Desktop（会自动创建 docker-desktop 发行版）。

  需要我根据你的系统版本（Win10/11、版本号）帮你精简成最短命令集吗？











   阶段 1：清理并重启

    - 多行版
        - wsl --shutdown
        - wsl -l -q | % { wsl --unregister $_ } 2>$null
        - Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux,VirtualMachinePlatform
          -NoRestart
        - Restart-Computer
    - 单行版
        - wsl --shutdown; wsl -l -q | % { wsl --unregister $_ } 2>$null; Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux,VirtualMachinePlatform -NoRestart; Restart-Computer

    阶段 2：重装并设置

    - 多行版（重启后执行）
        - Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux,VirtualMachinePlatform -NoRestart
        - Restart-Computer
        - wsl --install --no-distribution
        - wsl --update
            - wsl --set-default-version 2
        - 安装发行版（示例 Ubuntu）：wsl --install -d Ubuntu
    - 单行版（重启后依次执行，第一行会重启）
        - Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux,VirtualMachinePlatform
          -NoRestart; Restart-Computer
        - wsl --install --no-distribution; wsl --update; wsl --set-default-version 2; wsl --install -d Ubuntu

    验证

    - wsl --version
    - wsl -l -v